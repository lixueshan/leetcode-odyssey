# 470-用Rand7()实现Rand10()

[470. 用 Rand7() 实现 Rand10()](https://leetcode.cn/problems/implement-rand10-using-rand7/) (中等)

<br />

## 解法一：拒绝采样

### 算法描述

我们希望通过某个事件发生器获得等概率事件，例如 $Rand7()$ 是一个随机数生成器，以相等的概率随机生成 $1 \sim 7$ 。 拒绝采样的意思是，如果这个事件发生器能够产生的独立事件种类数多于我们所需，我们可以设置条件舍弃一部分事件。例如我们希望利用 $Rand7()$ 获取概率各为 $50\%$ 的两个独立事件，那么我们可以在得到 $7$ 时拒绝掉该事件，而获得 $1,3,5$ 视作同一个事件，$2,4,6$ 视作另一个事件，由于他们在 $7$ 以外的事件中各占一半，因此这两个事件发生概率都是 $50\%$ ($\frac{3}{7}/(\frac{3}{7}+\frac{3}{7})=\frac{1}{2}$)。

对应到本题，只要我们能够用 $Rand7()$ 设计出 $10$ 种等概率事件即可。采用古典概型，以上述例子为概率各 $50\%$ 的事件，再以拒绝 $6,7$ 后得到的 $1$ 到 $5$ 为概率均为 $20\%$ 的事件，二者相结合即可产生十种不同的概率均为 $10\%$ 的独立事件。

据此我们可以写出很多种不同的实现，「代码」中给出两个例子。

<br />

### 时空复杂度

时间复杂度：$O(1)$ ，期望为一个小常数。

空间复杂度：$O(1)$

<br />

### 代码

```java
class Solution extends SolBase {
    public int rand10() {
        int a = 7, b = 7;
        while(a == 7) a = rand7(); // 事件1: [1,6]范围内的奇数或偶数
        while(b == 6 || b == 7) b = rand7(); // 事件2: [1,5]中的某个数
        return (a & 1) == 0 ? b : b + 5; // 偶数时取[1,5]，奇数时取[6,10]
    }
}
```

```java
class Solution extends SolBase {
    public int rand10() {
        int a = 7, b = 7;
        while(a == 7) a = rand7(); // 事件1: [1,6]中的某个数
        while(b == 6 || b == 7) b = rand7(); // 事件2: [1,5]中的某个数
        return a < 4 ? b : b + 5; // 偶数时取[1,5]，奇数时取[6,10]
    }
}
```

<br />

